<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Quickstart to ML with dabl &mdash; dabl  documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/project-template.css" type="text/css" />
      <link rel="stylesheet" href="_static/plot_directive.css" type="text/css" />
      <link rel="stylesheet" href="_static/basic.css" type="text/css" />
      <link rel="stylesheet" href="_static/sg_gallery.css" type="text/css" />
      <link rel="stylesheet" href="_static/sg_gallery-binder.css" type="text/css" />
      <link rel="stylesheet" href="_static/sg_gallery-dataframe.css" type="text/css" />
      <link rel="stylesheet" href="_static/sg_gallery-rendered-html.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/documentation_options.js?v=5929fcd5"></script>
        <script src="_static/doctools.js?v=888ff710"></script>
        <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="_static/js/copybutton.js?v=26522df0"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Machine Learning with dabl" href="user_guide.html" />
    <link rel="prev" title="Welcome to dabl, the Data Analysis Baseline Library" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> dabl
          </a>
              <div class="version">
                0.2.6-dev
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Quickstart to ML with dabl</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="user_guide.html">Machine Learning with dabl</a></li>
<li class="toctree-l1"><a class="reference internal" href="concepts_term.html">Concepts and terminology</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">dabl API</a></li>
<li class="toctree-l1"><a class="reference internal" href="changes.html">Release History</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Examples</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="auto_examples/index.html">General examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="auto_examples/index.html#plotting-examples">Plotting examples</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">dabl</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a></li>
      <li class="breadcrumb-item active">Quickstart to ML with dabl</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/quick_start.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="quickstart-to-ml-with-dabl">
<h1>Quickstart to ML with dabl<a class="headerlink" href="#quickstart-to-ml-with-dabl" title="Link to this heading">¶</a></h1>
<p>Let’s dive right in!</p>
<p>Let’s start with the classic. You have the titanic.csv file and want to predict
whether a passenger survived or not based on the information about the
passenger in that file.
We know, for tabular data like this, pandas is our friend.
Clearly we need to start with loading our data:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">dabl</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">titanic</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">dabl</span><span class="o">.</span><span class="n">datasets</span><span class="o">.</span><span class="n">data_path</span><span class="p">(</span><span class="s2">&quot;titanic.csv&quot;</span><span class="p">))</span>
</pre></div>
</div>
<p>Let’s familiarize ourself with the data a bit; what’s the shape, what are the
columns, what do they look like?</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">titanic</span><span class="o">.</span><span class="n">shape</span>
<span class="go">(1309, 14)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">titanic</span><span class="o">.</span><span class="n">head</span><span class="p">()</span> 
<span class="go">   pclass  survived  ... body                        home.dest</span>
<span class="go">0       1         1  ...    ?                     St Louis, MO</span>
<span class="go">1       1         1  ...    ?  Montreal, PQ / Chesterville, ON</span>
<span class="go">2       1         0  ...    ?  Montreal, PQ / Chesterville, ON</span>
<span class="go">3       1         0  ...  135  Montreal, PQ / Chesterville, ON</span>
<span class="go">4       1         0  ...    ?  Montreal, PQ / Chesterville, ON</span>

<span class="go">[5 rows x 14 columns]</span>
</pre></div>
</div>
<p>So far so good! There’s already a bunch of things going on in the data that we
can see here, but let’s ask dabl what it thinks by cleaning up the data:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">titanic_clean</span> <span class="o">=</span> <span class="n">dabl</span><span class="o">.</span><span class="n">clean</span><span class="p">(</span><span class="n">titanic</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
<p>This provides us with lots of information about what is happening in the
different columns. In this case, we might have been able to figure this out
quickly from the call to head,
but in larger datasets this might be a bit tricky.
For example we can see that there are several dirty columns with “?” in it.
This is probably a marker for a missing value and we could go back and fix our
parsing of the CSV, but let’s try and continue with what dabl is doing
automatically for now.  In dabl, we can also get a best guess of the column
types in a convenient format:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">types</span> <span class="o">=</span> <span class="n">dabl</span><span class="o">.</span><span class="n">detect_types</span><span class="p">(</span><span class="n">titanic_clean</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">types</span><span class="p">)</span> 
<span class="go">                      continuous  dirty_float  ...  free_string  useless</span>
<span class="go">pclass                     False        False  ...        False    False</span>
<span class="go">survived                   False        False  ...        False    False</span>
<span class="go">name                       False        False  ...         True    False</span>
<span class="go">sex                        False        False  ...        False    False</span>
<span class="go">sibsp                      False        False  ...        False    False</span>
<span class="go">parch                      False        False  ...        False    False</span>
<span class="go">ticket                     False        False  ...         True    False</span>
<span class="go">cabin                      False        False  ...         True    False</span>
<span class="go">embarked                   False        False  ...        False    False</span>
<span class="go">boat                       False        False  ...        False    False</span>
<span class="go">home.dest                  False        False  ...         True    False</span>
<span class="go">age_?                      False        False  ...        False    False</span>
<span class="go">age_dabl_continuous         True        False  ...        False    False</span>
<span class="go">fare_?                     False        False  ...        False     True</span>
<span class="go">fare_dabl_continuous        True        False  ...        False    False</span>
<span class="go">body_?                     False        False  ...        False    False</span>
<span class="go">body_dabl_continuous        True        False  ...        False    False</span>

<span class="go">[17 rows x 8 columns]</span>
</pre></div>
</div>
<p>Having a very rough idea of the shape of our data, we can now start looking
at the actual content. The easiest way to do that is using visualization of
univariate and bivariate patterns. With plot,
we can create plot of the features deemed most important for our task.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dabl</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">titanic</span><span class="p">,</span> <span class="s1">&#39;survived&#39;</span><span class="p">)</span> 
<span class="go">Target looks like classification</span>
<span class="go">Linear Discriminant Analysis training set score: 0.578</span>
</pre></div>
</div>
<p>(<a class="reference download internal" download="" href="_downloads/25f92e9b178df247fb6ce3cb1c550061/quick_start-1.py"><code class="xref download docutils literal notranslate"><span class="pre">Source</span> <span class="pre">code</span></code></a>)</p>
<figure class="align-default" id="id1">
<img alt="_images/quick_start-1_00.png" class="plot-directive" src="_images/quick_start-1_00.png" />
<figcaption>
<p><span class="caption-text">(<a class="reference download internal" download="" href="_downloads/84d6e22e9468041b7eb4ee02b411b6a2/quick_start-1_00.png"><code class="xref download docutils literal notranslate"><span class="pre">png</span></code></a>, <a class="reference download internal" download="" href="_downloads/002b55abf51fce4eee44e16140729a5a/quick_start-1_00.hires.png"><code class="xref download docutils literal notranslate"><span class="pre">hires.png</span></code></a>, <a class="reference download internal" download="" href="_downloads/a543d1cc84ac368d139f5d9b400c2b83/quick_start-1_00.pdf"><code class="xref download docutils literal notranslate"><span class="pre">pdf</span></code></a>)</span><a class="headerlink" href="#id1" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<figure class="align-default" id="id2">
<img alt="_images/quick_start-1_01.png" class="plot-directive" src="_images/quick_start-1_01.png" />
<figcaption>
<p><span class="caption-text">(<a class="reference download internal" download="" href="_downloads/b9f45fc3ee7c9c62bfed818ca1d36fa1/quick_start-1_01.png"><code class="xref download docutils literal notranslate"><span class="pre">png</span></code></a>, <a class="reference download internal" download="" href="_downloads/a9af94735ce898b05ce77028244a270b/quick_start-1_01.hires.png"><code class="xref download docutils literal notranslate"><span class="pre">hires.png</span></code></a>, <a class="reference download internal" download="" href="_downloads/f6480987ae9e104065ba4940975a154d/quick_start-1_01.pdf"><code class="xref download docutils literal notranslate"><span class="pre">pdf</span></code></a>)</span><a class="headerlink" href="#id2" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<figure class="align-default" id="id3">
<img alt="_images/quick_start-1_02.png" class="plot-directive" src="_images/quick_start-1_02.png" />
<figcaption>
<p><span class="caption-text">(<a class="reference download internal" download="" href="_downloads/463916f10a20ec3dbd10495937710907/quick_start-1_02.png"><code class="xref download docutils literal notranslate"><span class="pre">png</span></code></a>, <a class="reference download internal" download="" href="_downloads/abe2ca0c9c182a9e79a2c02fd698fa4d/quick_start-1_02.hires.png"><code class="xref download docutils literal notranslate"><span class="pre">hires.png</span></code></a>, <a class="reference download internal" download="" href="_downloads/52efd8bad89d6b71a62849f75dfca828/quick_start-1_02.pdf"><code class="xref download docutils literal notranslate"><span class="pre">pdf</span></code></a>)</span><a class="headerlink" href="#id3" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<figure class="align-default" id="id4">
<img alt="_images/quick_start-1_03.png" class="plot-directive" src="_images/quick_start-1_03.png" />
<figcaption>
<p><span class="caption-text">(<a class="reference download internal" download="" href="_downloads/be39fb02e8fdc1459ff44bc015eddbb6/quick_start-1_03.png"><code class="xref download docutils literal notranslate"><span class="pre">png</span></code></a>, <a class="reference download internal" download="" href="_downloads/888675c06bbfe27e66768031311bbb6a/quick_start-1_03.hires.png"><code class="xref download docutils literal notranslate"><span class="pre">hires.png</span></code></a>, <a class="reference download internal" download="" href="_downloads/8a3896e1cf6dcf79f72a0eb3706ac422/quick_start-1_03.pdf"><code class="xref download docutils literal notranslate"><span class="pre">pdf</span></code></a>)</span><a class="headerlink" href="#id4" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<figure class="align-default" id="id5">
<img alt="_images/quick_start-1_04.png" class="plot-directive" src="_images/quick_start-1_04.png" />
<figcaption>
<p><span class="caption-text">(<a class="reference download internal" download="" href="_downloads/8c2f8a62ed3ca61cb622e38521e1ad9b/quick_start-1_04.png"><code class="xref download docutils literal notranslate"><span class="pre">png</span></code></a>, <a class="reference download internal" download="" href="_downloads/c275adb4fb7bb5f1089c6d6ae1e30410/quick_start-1_04.hires.png"><code class="xref download docutils literal notranslate"><span class="pre">hires.png</span></code></a>, <a class="reference download internal" download="" href="_downloads/26cfd903217e25f59c003dedb8928df3/quick_start-1_04.pdf"><code class="xref download docutils literal notranslate"><span class="pre">pdf</span></code></a>)</span><a class="headerlink" href="#id5" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<p>Finally, we can find an initial model for our data. The SimpleClassifier does all
the work for us. It implements the familiar scikit-learn API of fit and
predict. Alternatively we could also use the same interface as before and pass
the whole data frame and specify the target column.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">fc</span> <span class="o">=</span> <span class="n">dabl</span><span class="o">.</span><span class="n">SimpleClassifier</span><span class="p">(</span><span class="n">random_state</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">X</span> <span class="o">=</span> <span class="n">titanic_clean</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s2">&quot;survived&quot;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span> <span class="o">=</span> <span class="n">titanic_clean</span><span class="o">.</span><span class="n">survived</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fc</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span> 
<span class="go">DummyClassifier(strategy=&#39;prior&#39;)</span>
<span class="go">accuracy: 0.618    average_precision: 0.382    recall_macro: 0.500    roc_auc: 0.500</span>
<span class="go">new best (using recall_macro):</span>
<span class="go">accuracy             0.618</span>
<span class="go">average_precision    0.382</span>
<span class="go">recall_macro         0.500</span>
<span class="go">roc_auc              0.500</span>
<span class="go">Name: DummyClassifier(strategy=&#39;prior&#39;), dtype: float64</span>
<span class="go">GaussianNB()</span>
<span class="go">accuracy: 0.897    average_precision: 0.870    recall_macro: 0.902    roc_auc: 0.919</span>
<span class="go">new best (using recall_macro):</span>
<span class="go">accuracy             0.897</span>
<span class="go">average_precision    0.870</span>
<span class="go">recall_macro         0.902</span>
<span class="go">roc_auc              0.919</span>
<span class="go">Name: GaussianNB(), dtype: float64</span>
<span class="go">MultinomialNB()</span>
<span class="go">accuracy: 0.888    average_precision: 0.981    recall_macro: 0.891    roc_auc: 0.985</span>
<span class="go">DecisionTreeClassifier(class_weight=&#39;balanced&#39;, max_depth=1)</span>
<span class="go">accuracy: 0.976    average_precision: 0.954    recall_macro: 0.971    roc_auc: 0.971</span>
<span class="go">new best (using recall_macro):</span>
<span class="go">accuracy             0.976</span>
<span class="go">average_precision    0.954</span>
<span class="go">recall_macro         0.971</span>
<span class="go">roc_auc              0.971</span>
<span class="go">Name: DecisionTreeClassifier(class_weight=&#39;balanced&#39;, max_depth=1), dtype: float64</span>
<span class="go">DecisionTreeClassifier(class_weight=&#39;balanced&#39;, max_depth=5)</span>
<span class="go">accuracy: 0.957    average_precision: 0.943    recall_macro: 0.953    roc_auc: 0.970</span>
<span class="go">DecisionTreeClassifier(class_weight=&#39;balanced&#39;, min_impurity_decrease=0.01)</span>
<span class="go">accuracy: 0.976    average_precision: 0.954    recall_macro: 0.971    roc_auc: 0.971</span>
<span class="go">LogisticRegression(C=0.1, class_weight=&#39;balanced&#39;)</span>
<span class="go">accuracy: 0.963    average_precision: 0.986    recall_macro: 0.961    roc_auc: 0.989</span>
<span class="go">Best model:</span>
<span class="go">DecisionTreeClassifier(class_weight=&#39;balanced&#39;, max_depth=1)</span>
<span class="go">Best Scores:</span>
<span class="go">accuracy             0.976</span>
<span class="go">average_precision    0.954</span>
<span class="go">recall_macro         0.971</span>
<span class="go">roc_auc              0.971</span>
<span class="go">Name: DecisionTreeClassifier(class_weight=&#39;balanced&#39;, max_depth=1), dtype: float64</span>
<span class="go">SimpleClassifier(random_state=0, refit=True, verbose=1)</span>
</pre></div>
</div>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="Welcome to dabl, the Data Analysis Baseline Library" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="user_guide.html" class="btn btn-neutral float-right" title="Machine Learning with dabl" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2018, Andreas Mueller.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>